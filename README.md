# HIV Recombinant Sequence Plotter (HIV é‡ç»„åºåˆ—ç»˜å›¾å·¥å…·)

è¿™æ˜¯ä¸€ä¸ªç”¨äºŽç”Ÿæˆ HIV é‡ç»„åºåˆ—åŸºå› ç»“æž„å›¾çš„å·¥å…·ï¼Œæ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ã€‚æ— è®ºä½ æ˜¯å¸Œæœ›å¿«é€Ÿåœ¨æµè§ˆå™¨ä¸­é¢„è§ˆï¼Œè¿˜æ˜¯éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ‰¹é‡çš„ä¸“ä¸šç»˜å›¾ï¼Œæœ¬å·¥å…·éƒ½èƒ½æ»¡è¶³éœ€æ±‚ã€‚

## ðŸ“‚ æ–‡ä»¶æ¸…å•ä¸Žä»‹ç»

| æ–‡ä»¶å                | ç±»åž‹     | è¯´æ˜Ž                                                         |
| :-------------------- | :------- | :----------------------------------------------------------- |
| **`HIV_v1.0.3.html`** | ç½‘é¡µå·¥å…· | **çº¯å‰ç«¯ç‰ˆæœ¬**ã€‚æ— éœ€å®‰è£…ä»»ä½•çŽ¯å¢ƒï¼ŒåŒå‡»ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œé€‚åˆå¿«é€Ÿäº¤äº’å¼ç»˜å›¾ã€‚ |
| **`HIV_v2.js`**       | æ ¸å¿ƒè„šæœ¬ | **Node.js æºç **ã€‚ç»˜å›¾é€»è¾‘çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œæ”¯æŒå‘½ä»¤è¡Œå‚æ•° (`-i`, `-pdf`, `-png`)ï¼ŒåŸºäºŽ `canvas` åº“å¼€å‘ã€‚ |
| **`Dockerfile`**      | æž„å»ºæ–‡ä»¶ | **é•œåƒé…æ–¹**ã€‚ç”¨äºŽæ ¹æ®æºç æž„å»ºåŒ…å«å®Œæ•´çŽ¯å¢ƒï¼ˆNode.js, Canvas, å­—ä½“åº“ï¼‰çš„ Docker é•œåƒã€‚ |
| **`package.json`**    | ä¾èµ–é…ç½® | Node.js é¡¹ç›®çš„ä¾èµ–æè¿°æ–‡ä»¶ã€‚                                 |

---

## ðŸš€ ä½¿ç”¨æ–¹å¼

æœ¬å·¥å…·æä¾›ä¸‰ç§ä½¿ç”¨æ¨¡å¼ï¼Œè¯·æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©ã€‚

### æ¨¡å¼ä¸€ï¼šç½‘é¡µç‰ˆ (æœ€ç®€å•)

æ— éœ€ä»»ä½•å®‰è£…ï¼Œé€‚åˆä¸´æ—¶ä½¿ç”¨ã€‚

1.  ç›´æŽ¥åŒå‡»æ‰“å¼€ç›®å½•ä¸‹çš„ `HIV_v1.0.3.html`ã€‚
2.  åœ¨æµè§ˆå™¨çª—å£ä¸­ç²˜è´´ä½ çš„åºåˆ—æ•°æ®ã€‚
3.  ç‚¹å‡»â€œç”Ÿæˆå›¾è¡¨â€æŒ‰é’®å³å¯é¢„è§ˆæˆ–ä¸‹è½½å›¾ç‰‡ã€‚

---

### æ¨¡å¼äºŒï¼šDocker ç‰ˆ (æŽ¨è - æœ€ç¨³å®š)

é€‚åˆéœ€è¦æ‰¹é‡å¤„ç†ã€ç”Ÿæˆé«˜åˆ†è¾¨çŽ‡å°åˆ·çº§å›¾ç‰‡ (PDF/300DPI PNG) çš„ç”¨æˆ·ã€‚
æ­¤æ¨¡å¼åˆ©ç”¨ Docker å®¹å™¨åŒ–æŠ€æœ¯ï¼Œ**æ— éœ€ä½ åœ¨ç”µè„‘ä¸Šå®‰è£… Node.jsï¼Œä¸”å®Œç¾Žè§£å†³äº† Canvas ä¾èµ–å’Œä¸­æ–‡å­—ä½“å®‰è£…å›°éš¾çš„é—®é¢˜**ã€‚

#### 1. æž„å»ºé•œåƒ (Build)
é¦–æ¬¡ä½¿ç”¨å‰ï¼Œè¯·åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æž„å»ºé•œåƒï¼š

```bash
docker build -t hiv-plotter .
```
> *æ³¨æ„ï¼šæž„å»ºè¿‡ç¨‹éœ€è¦ä¸‹è½½ç³»ç»Ÿä¾èµ–å’Œå­—ä½“æ–‡ä»¶ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ç›´åˆ°æ˜¾ç¤º FINISHEDã€‚*

#### 2. è¿è¡Œç»˜å›¾ (Run)
æž„å»ºå®ŒæˆåŽï¼Œå³å¯ä½¿ç”¨ã€‚æˆ‘ä»¬éœ€è¦å°†å­˜æ”¾æ•°æ®çš„æœ¬åœ°æ–‡ä»¶å¤¹æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚
å‡è®¾ä½ çš„è¾“å…¥æ–‡ä»¶åœ¨ `D:\work\data\input.txt`ï¼Œä½ æƒ³æŠŠç»“æžœè¾“å‡ºåˆ°åŒç›®å½•ã€‚

```bash
docker run --rm -v "D:\work\data:/data" hiv-plotter -i /data/input.txt -pdf /data/result.pdf -png /data/result.png
```

> **å‚æ•°è¯´æ˜Žï¼š**
> *   `-v "æœ¬åœ°ç›®å½•:/data"`: å°†ä½ ç”µè„‘çš„æ–‡ä»¶å¤¹æ˜ å°„åˆ°å®¹å™¨å†…çš„ `/data`ã€‚
> *   `-i`: æŒ‡å®šè¾“å…¥æ–‡ä»¶è·¯å¾„ (å®¹å™¨å†…è·¯å¾„)ã€‚
> *   `-pdf`: æŒ‡å®šè¾“å‡º PDF è·¯å¾„ã€‚
> *   `-png`: æŒ‡å®šè¾“å‡º PNG è·¯å¾„ (é»˜è®¤ 300 DPI)ã€‚

#### 3. äº¤äº’å¼æ‰¹é‡å¤„ç†
å¦‚æžœä½ æœ‰å¤§é‡æ–‡ä»¶éœ€è¦å¤„ç†ï¼Œä¸æƒ³æ¯æ¬¡éƒ½å¯åŠ¨æ–°å®¹å™¨ï¼Œå¯ä»¥è¿›å…¥å®¹å™¨å†…éƒ¨è¿žç»­æ‰§è¡Œï¼š

```bash
# 1. è¿›å…¥å®¹å™¨å‘½ä»¤è¡Œ
docker run -it --rm -v "D:\work\data:/data" --entrypoint sh hiv-plotter

# 2. åœ¨å®¹å™¨å†…æ‰§è¡Œå¤šæ¬¡å‘½ä»¤
node HIV_v2.js -i /data/sample1.txt -pdf /data/out1.pdf -png /data/out1.png
node HIV_v2.js -i /data/sample2.txt -pdf /data/out2.pdf -png /data/out2.png

# 3. é€€å‡º
exit
```

---

### æ¨¡å¼ä¸‰ï¼šNode.js æºç ç‰ˆ (å¼€å‘è€…)

é€‚åˆå¼€å‘è€…æˆ–ç†Ÿæ‚‰ Node.js çŽ¯å¢ƒçš„ç”¨æˆ·è¿›è¡ŒäºŒæ¬¡å¼€å‘æˆ–æœ¬åœ°è°ƒè¯•ã€‚

#### 1. çŽ¯å¢ƒè¦æ±‚
*   Node.js (v18 æˆ– v20 LTS)
*   **ç³»ç»Ÿçº§ä¾èµ–**: ç”±äºŽä½¿ç”¨äº†åŽŸç”Ÿ `canvas` åº“ï¼ŒWindows ç”¨æˆ·å¯èƒ½éœ€è¦å®‰è£… Visual Studio Build Tools å’Œ Pythonï¼›Linux ç”¨æˆ·éœ€å®‰è£… `libcairo2-dev`, `libpango1.0-dev` ç­‰å›¾å½¢åº“ã€‚

#### 2. å®‰è£…ä¸Žè¿è¡Œ
```bash
# 1. å®‰è£…é¡¹ç›®ä¾èµ–
npm install

# 2. è¿è¡Œè„šæœ¬
node HIV_v2.js -i ./input.txt -pdf ./output.pdf -png ./output.png
```

---

## ðŸ“ è¾“å…¥æ–‡ä»¶æ ¼å¼

æ— è®ºä½¿ç”¨å“ªç§æ¨¡å¼ï¼Œè¾“å…¥æ•°æ®è¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

1.  **èµ·å§‹æ ‡è®°**ï¼šå·¥å…·ä¼šå¯»æ‰¾ä»¥ `>` å¼€å¤´çš„è¡Œï¼ˆä¾‹å¦‚ `>Sequence_ID`ï¼‰ï¼Œæ•°æ®è§£æžå°†ä»Ž**è¯¥è¡Œçš„ä¸‹ä¸€è¡Œ**å¼€å§‹ã€‚
2.  **æ³¨é‡Š**ï¼šä»¥ `#` å¼€å¤´çš„è¡Œä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚
3.  **æ•°æ®åˆ—**ï¼šæ¯è¡Œä¸‰åˆ—ï¼Œä½¿ç”¨**ç©ºæ ¼**æˆ–**åˆ¶è¡¨ç¬¦**åˆ†éš”ï¼š`èµ·å§‹ä½ç½®  ç»“æŸä½ç½®  äºšåž‹`ã€‚

**ç¤ºä¾‹æ–‡ä»¶å†…å®¹ï¼š**
```text
# è¿™é‡Œæ˜¯æ³¨é‡Šï¼Œä¼šè¢«å¿½ç•¥
>Sample_Sequence_2025
1       736     D
737     1058    C
1059    2510    D
2511    2800    C
8598    8809    3'-Insertion
```

---

## License
ISC License
